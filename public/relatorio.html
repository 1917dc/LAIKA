<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="Consórcios LAIKA">
    <meta property="og:description" content="Eleve a velocidade de seus consórcios!">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório</title>
    <link rel="icon" type="image/png" href="./assets/laika.png"/>

    <!-- CSS -->
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
</head>

<body>
    <div class="container mt-2">
        <!-- Header -->
        <h3 class="prevent-select" style="margin: 2%; padding: 2%; text-align: center;">Relatório de Vendas</h3>


        <!-- Tabela -->
        <table class="table table-hover table-dark">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Cargo</th>
                    <th>Total de Vendas</th>
                    <th>Maior Venda</th>
                    <th>Comissão</th>
                </tr>
            </thead>
            <tbody id="relatorioBody">
                <!-- <tr>
                        <td>Fulano</td>
                        <td>senior</td>
                        <td>001</td>
                        <td>999.99</td>
                        <td>1%</td>
                        <td>Editar/excluir</td>
                    </tr> -->
            </tbody>
        </table>
        <!-- Botão de impressão -->
        <button type="button" id="imprimirBtn" class="btn btn-dark" onclick="window.print();return false;" style="
        display: block;
        margin: 5% auto;">
        Imprimir</button>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="wrapper">
            <div class="footer-content">
                <div class="footer-links">
                    <ul>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </div>
            <p class="footer-text">Projeto feito para a disciplina de Bases da Computação (2023/2°S).</p>
            <p class="footer-text">Desenvolvedores: Anael, Arthur, Luiz Gustavo.</p>
            <div class="footer-social">
                <a href="https://github.com/1917dc/projeto-JS" target="_blank"><i class="bi bi-github"></i></a>
            </div>
        </div>
    </footer>

    <!-- JS -->
    <script>
        localStorage
        let vendas = JSON.parse(localStorage.getItem('vendas'))
        console.log(vendas)
        renderizarTabela();

        function renderizarTabela() {
            let relatorioBody = document.getElementById('relatorioBody')
            relatorioBody.innerHTML = '' // Limpa a tabela

            vendas.forEach((venda, index) => {
                venda.totalVendas = parseFloat(venda.totalVendas)
                valorVendaFormatado = venda.totalVendas.toLocaleString('pt-BR', {
                    style: 'currency', currency: 'BRL'
                })
                comissaoFormatado = venda.comissao.toLocaleString('pt-BR', {
                    style: 'currency', currency: 'BRL'
                })
                maiorVendaFormatado = venda.maiorVenda.toLocaleString('pt-BR', {
                    style: 'currency', currency: 'BRL'
                })

                relatorioBody.innerHTML += `
                    <tr>
                        <td>${venda.nome}</td>
                        <td>${venda.cargo}</td>
                        <td>${valorVendaFormatado}</td>
                        <td>${maiorVendaFormatado}</td>
                        <td>${comissaoFormatado}</td>
                    </tr>
                    `
            })
        }
    </script>
</body>
</html>